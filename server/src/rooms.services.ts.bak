// import { update } from '../../utils/helpers';

// const rooms = new Map<string, Room>([
//     [
//         'room1',
//         {
//             id: 'room1',
//             name: 'Room 1',
//             participants: []
//         }
//     ]
// ]);

// export function getAllRooms() {
//     return [
//         ...rooms.values().map(({ id, name, participants }) => ({
//             id,
//             name,
//             participantCount: participants.length
//         }))
//     ];
// }

// export async function getRoomById(id: string) {
//     return rooms.get(id);
// }

// export async function getParticipantsForRoom(roomId: string) {
//     const room = await getRoomById(roomId);

//     if (room) {
//         return room.participants;
//     } else {
//         throw new Error(`Target room doesn't exist.`);
//     }
// }

// export async function getParticipantIds(roomId: string) {
//     const participants = await getParticipantsForRoom(roomId);

//     return participants.map(({ id }) => id);
// }

// export async function isParticipantInRoom(
//     participantId: string,
//     roomId: string
// ) {
//     const participantIds = await getParticipantIds(roomId);

//     return participantIds.includes(participantId);
// }

// export async function areParticipantsInRoom(
//     participantIds: string[],
//     roomId: string
// ) {
//     const roomParticipantIds = await getParticipantIds(roomId);

//     return participantIds.every((id) => roomParticipantIds.includes(id));
// }

// export async function updateRoom(roomId: string, data: Partial<Room>) {
//     const room = rooms.get(roomId);

//     if (room) {
//         rooms.set(roomId, {
//             ...room,
//             ...data
//         });
//     } else {
//         throw new Error(`This room doesn't exist.`);
//     }
// }

// export async function addParticipantToRoom(
//     participant: Participant,
//     roomId: string
// ) {
//     if (await isParticipantInRoom(participant.id, roomId)) {
//         throw Error('Target user is already in this room.');
//     } else {
//         updateRoom(roomId, {
//             participants: [
//                 ...(await getParticipantsForRoom(roomId)),
//                 participant
//             ]
//         });
//     }
// }

// export async function updateRoomParticipant(
//     participantId: string,
//     roomId: string,
//     data: Partial<Participant>
// ) {
//     if (await isParticipantInRoom(participantId, roomId)) {
//         updateRoom(roomId, {
//             participants: update(
//                 await getParticipantsForRoom(roomId),
//                 ({ id }) => id === participantId,
//                 data
//             )
//         });
//     } else {
//         throw Error('Target user is not in the room.');
//     }
// }

// export async function removeParticipantFromRoom(
//     participantId: string,
//     roomId: string
// ) {
//     if (await isParticipantInRoom(participantId, roomId)) {
//         const participants = await getParticipantsForRoom(roomId);

//         updateRoom(roomId, {
//             participants: participants.filter(({ id }) => id !== participantId)
//         });
//     } else {
//         throw Error('Target user is not in the room.');
//     }
// }
